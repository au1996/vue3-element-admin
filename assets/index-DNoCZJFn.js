import{R as ee,a7 as p,h as _,I as T,i as d,E as v,G as f,j as g,L as x,A as L,F as A,a1 as B,Q as D,e as w,c as I,M as h,u as N,H as q,N as j,T as H,ap as P,am as G,an as K,ar as U,w as z,U as te,K as y,r as F,m as Y,ao as ne,g as se,o as oe,as as E,y as ae,f as J,z as le,W as M,J as ie,at as re,v as ce}from"./vue-DMw5Nt_d.js";import{g as ue,c as de}from"./index-CWaAvQS7.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{g as fe,E as me,b as he}from"./element-plus-7YaSf0MG.js";import{p as pe}from"./axios-B7hLYxo8.js";const ve={key:0,class:"menu-wrapper"},ge={__name:"SidebarItem",props:{nav:{type:Object,required:!0},isNest:{type:Boolean,default:!1}},setup(e){return ee(e),(l,o)=>{const c=p("Icon"),u=p("el-menu-item"),i=p("SidebarItem",!0),r=p("el-sub-menu");return e.nav.meta&&!e.nav.hide?(d(),_("div",ve,[!e.nav.children||!e.nav.children.length?(d(),v(u,{key:0,index:e.nav.path,class:L({"sub-menu-title-noDropdown":!e.nav.isNest})},{title:f(()=>[g("span",null,x(e.nav.meta.title),1)]),default:f(()=>[e.nav.meta.icon?(d(),v(c,{key:0,name:e.nav.meta.icon,size:"18",class:"sidebar-icon"},null,8,["name"])):T("",!0)]),_:1},8,["index","class"])):(d(),v(r,{key:1,index:e.nav.path},{title:f(()=>[e.nav.meta.icon?(d(),v(c,{key:0,name:e.nav.meta.icon,size:"18",class:"sidebar-icon"},null,8,["name"])):T("",!0),g("span",null,x(e.nav.meta.title),1)]),default:f(()=>[(d(!0),_(A,null,B(e.nav.children,t=>(d(),_("div",{key:t.path},[t.children&&t.children.length?(d(),v(i,{key:t.path,index:t.path,"is-nest":!0,nav:t,class:"nest-menu"},null,8,["index","nav"])):(d(),v(u,{key:1,index:t.path},{title:f(()=>[g("span",null,x(t.meta.title),1)]),_:2},1032,["index"]))]))),128))]),_:1},8,["index"]))])):T("",!0)}}},_e="/vue3-element-admin/assets/logo-CPmPqqKk.png",be={class:"sidebar-container"},we=["src"],$e={class:"logo-text"},ke={__name:"index",setup(e){const n=ue(),l=P(),o=D([]),c=w(()=>l.state.app.sidebar.opened),u=w(()=>!c.value);I(()=>{i()});const i=()=>{de.forEach(t=>{t.path==="/"&&o.push(...t.children)});for(let t=0;t<o.length;t++)o[t].meta&&o[t].meta.roles&&!o[t].meta.roles.includes(n)&&(o.splice(t,1),t--);r(o)},r=t=>{const s=[];t.forEach(a=>{(a.meta&&!a.meta.roles||a.meta&&a.meta.roles&&a.meta.roles.includes(n))&&(s.push(a),a.children&&r(a.children))}),t.length=0,t.push(...s)};return(t,s)=>{const a=p("el-menu"),m=p("el-scrollbar");return d(),_("div",be,[g("div",{class:"logo",onClick:s[0]||(s[0]=b=>t.$router.push("/"))},[g("img",{class:"logo-img",src:N(_e),alt:"logo"},null,8,we),h(H,{name:"fade-transform",mode:"out-in"},{default:f(()=>[q(g("h1",$e,"Vue Element Admin",512),[[j,c.value]])]),_:1})]),h(m,{"wrap-class":"scrollbar-wrapper"},{default:f(()=>[h(a,{router:!0,"default-active":t.$route.path,collapse:u.value,"show-timeout":200,class:"v-enter-to","text-color":"#fff","background-color":"#4a5a74","active-text-color":"#409EFF"},{default:f(()=>[(d(!0),_(A,null,B(o,b=>(d(),v(ge,{key:b.path,index:b.path,nav:b},null,8,["index","nav"]))),128))]),_:1},8,["default-active","collapse"])]),_:1})])}}},Se=$(ke,[["__scopeId","data-v-3ab94365"]]),Te=e=>(G("data-v-9c8ba163"),e=e(),K(),e),xe=Te(()=>g("path",{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 0 0 0-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0 0 14.4 7z"},null,-1)),Ce=[xe],Ee={__name:"Hamburger",props:{isActive:{type:Boolean,default:!1}},emits:["toggleClick"],setup(e,{emit:n}){const l=e,o=n,c=()=>{o("toggleClick")};return(u,i)=>(d(),_("div",{class:"pl-15 pr-15",onClick:c},[(d(),_("svg",{class:L([{"is-active":l.isActive},"hamburger"]),viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64"},Ce,2))]))}},ye=$(Ee,[["__scopeId","data-v-9c8ba163"]]),Fe={key:0,class:"no-redirect"},Le={__name:"Breadcrumb",setup(e){const n=U(),l=D([]);z(n,()=>{o()});const o=()=>{let u=n.matched.filter(t=>t.meta&&t.meta.title);const i=u[0];c(i)||(u=[{path:"/home",meta:{title:"首页"}}].concat(u)),l.length=0;const r=u.filter(t=>t.meta&&t.meta.title&&t.meta.breadcrumb!==!1);l.push(...r)},c=u=>{const i=u&&u.name;return i?i.trim().toLocaleLowerCase()==="Home".toLocaleLowerCase():!1};return o(),(u,i)=>{const r=p("router-link"),t=p("el-breadcrumb-item"),s=p("el-breadcrumb");return d(),v(s,{separator:"/",class:"app-breadcrumb"},{default:f(()=>[h(te,{name:"breadcrumb"},{default:f(()=>[(d(!0),_(A,null,B(l,(a,m)=>(d(),v(t,{key:a.path},{default:f(()=>[a.redirect==="noRedirect"||m==l.length-1?(d(),_("span",Fe,x(a.meta.title),1)):(d(),v(r,{key:1,to:a.redirect||a.path},{default:f(()=>[y(x(a.meta.title),1)]),_:2},1032,["to"]))]),_:2},1024))),128))]),_:1})]),_:1})}}},Ae=$(Le,[["__scopeId","data-v-1fe64e11"]]);var Q={exports:{}};/*!
* screenfull
* v5.1.0 - 2020-12-24
* (c) Sindre Sorhus; MIT License
*/(function(e){(function(){var n=typeof window<"u"&&typeof window.document<"u"?window.document:{},l=e.exports,o=function(){for(var i,r=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],t=0,s=r.length,a={};t<s;t++)if(i=r[t],i&&i[1]in n){for(t=0;t<i.length;t++)a[r[0][t]]=i[t];return a}return!1}(),c={change:o.fullscreenchange,error:o.fullscreenerror},u={request:function(i,r){return new Promise(function(t,s){var a=function(){this.off("change",a),t()}.bind(this);this.on("change",a),i=i||n.documentElement;var m=i[o.requestFullscreen](r);m instanceof Promise&&m.then(a).catch(s)}.bind(this))},exit:function(){return new Promise(function(i,r){if(!this.isFullscreen){i();return}var t=function(){this.off("change",t),i()}.bind(this);this.on("change",t);var s=n[o.exitFullscreen]();s instanceof Promise&&s.then(t).catch(r)}.bind(this))},toggle:function(i,r){return this.isFullscreen?this.exit():this.request(i,r)},onchange:function(i){this.on("change",i)},onerror:function(i){this.on("error",i)},on:function(i,r){var t=c[i];t&&n.addEventListener(t,r,!1)},off:function(i,r){var t=c[i];t&&n.removeEventListener(t,r,!1)},raw:o};if(!o){l?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};return}Object.defineProperties(u,{isFullscreen:{get:function(){return!!n[o.fullscreenElement]}},element:{enumerable:!0,get:function(){return n[o.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!n[o.fullscreenEnabled]}}}),l?e.exports=u:window.screenfull=u})()})(Q);var Be=Q.exports;const k=fe(Be),Me={__name:"Screenfull",setup(e){const n=F(!1),l=()=>k.isEnabled?(k.toggle(),!1):(me({message:"you browser can not work",type:"warning"}),!1),o=()=>{n.value=k.isFullscreen},c=()=>{k.isEnabled&&k.on("change",o)},u=()=>{k.isEnabled&&k.off("change",o)};return I(()=>{c()}),Y(()=>{u()}),(i,r)=>{const t=p("Icon");return d(),_("div",{class:"box",onClick:l},[h(t,{name:"FullScreen",size:"18"})])}}},Ve=$(Me,[["__scopeId","data-v-a8b6863c"]]),Ie=e=>(G("data-v-af691031"),e=e(),K(),e),Pe={class:"left-box"},ze={class:"right-menu"},Oe={class:"avatar-wrapper"},Re=["src"],We=Ie(()=>g("i",{class:"el-icon-caret-bottom"},null,-1)),De={__name:"index",setup(e){const n=ne(),l=P(),o=w(()=>l.state.app.sidebar.opened),c=w(()=>l.state.user.avatar),u=()=>{l.dispatch("app/toggleSideBar")},i=()=>{he.confirm("退出登录","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{l.dispatch("user/logout").then(()=>{n.push("/login")})}).catch(()=>{})};return(r,t)=>{const s=p("el-tooltip"),a=p("el-dropdown-item"),m=p("el-dropdown-menu"),b=p("el-dropdown"),S=p("el-menu");return d(),v(S,{class:"navbar",mode:"horizontal"},{default:f(()=>[g("div",Pe,[h(ye,{class:"hamburger-container","is-active":o.value,onToggleClick:u},null,8,["is-active"]),h(Ae,{class:"breadcrumb-container"})]),g("div",ze,[h(s,{effect:"dark",content:"全屏",placement:"bottom"},{default:f(()=>[h(Ve,{class:"screenfull"})]),_:1}),h(b,{class:"avatar-container right-menu-item"},{dropdown:f(()=>[h(m,null,{default:f(()=>[h(a,{onClick:t[0]||(t[0]=C=>r.$router.push("/"))},{default:f(()=>[y("首页")]),_:1}),h(a,{divided:"",onClick:i},{default:f(()=>[y("登出")]),_:1})]),_:1})]),default:f(()=>[g("div",Oe,[g("img",{src:c.value?c.value:"/img/logo.png",class:"user-avatar"},null,8,Re),We])]),_:1})])]),_:1})}}},Ne=$(De,[["__scopeId","data-v-af691031"]]);function qe(e){return se()?(oe(e),!0):!1}const je=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const He=Object.prototype.toString,Ge=e=>He.call(e)==="[object Object]";function V(e){return Array.isArray(e)?e:[e]}function Ke(e,n,l){return z(e,n,{...l,immediate:!0})}const Ue=je?window:void 0;function Ye(e){var n;const l=E(e);return(n=l==null?void 0:l.$el)!=null?n:l}function Je(...e){const n=[],l=()=>{n.forEach(r=>r()),n.length=0},o=(r,t,s,a)=>(r.addEventListener(t,s,a),()=>r.removeEventListener(t,s,a)),c=w(()=>{const r=V(E(e[0])).filter(t=>t!=null);return r.every(t=>typeof t!="string")?r:void 0}),u=Ke(()=>{var r,t;return[(t=(r=c.value)==null?void 0:r.map(s=>Ye(s)))!=null?t:[Ue].filter(s=>s!=null),V(E(c.value?e[1]:e[0])),V(N(c.value?e[2]:e[1])),E(c.value?e[3]:e[2])]},([r,t,s,a])=>{if(l(),!(r!=null&&r.length)||!(t!=null&&t.length)||!(s!=null&&s.length))return;const m=Ge(a)?{...a}:a;n.push(...r.flatMap(b=>t.flatMap(S=>s.map(C=>o(b,S,C,m)))))},{flush:"post"}),i=()=>{u(),l()};return qe(l),i}const Qe={__name:"ScrollPane",emits:["scroll"],setup(e,{expose:n,emit:l}){const o=l,c=F(4),u=F(null);Je(u,"scroll",()=>{o("scroll")});const i=t=>{const s=t.wheelDelta||-t.deltaY*40,a=u.value.$el.children[0];a.scrollLeft=a.scrollLeft+s/4};return n({moveToTarget:t=>{const s=document.getElementsByClassName("tags-view-item"),a=u.value.$el.children[0],m=a.offsetWidth;let b=null,S=null;if(s.length>0&&(b=s[0],S=s[s.length-1]),b===t)a.scrollLeft=0;else if(S===t)a.scrollLeft=a.scrollWidth-m;else{const C=[...s].findIndex(Z=>Z===t),X=s[C-1],O=s[C+1],R=O.offsetLeft+O.offsetWidth+c.value,W=X.offsetLeft-c.value;R>a.scrollLeft+m?a.scrollLeft=R-m:W<a.scrollLeft&&(a.scrollLeft=W)}}}),(t,s)=>{const a=p("el-scrollbar");return d(),v(a,{ref_key:"scrollbarRef",ref:u,vertical:!1,class:"scroll-container",onWheel:i},{default:f(()=>[ae(t.$slots,"default",{},void 0,!0)]),_:3},512)}}},Xe=$(Qe,[["__scopeId","data-v-ec6ee715"]]),Ze=J({components:{ScrollPane:Xe},data(){return{visible:!1,top:0,left:0,selectedTag:{},affixTags:[]}},computed:{visitedViews(){return this.$store.state.tagsView.visitedViews},routes(){return this.$store.state.permission.routes}},watch:{$route(e){this.addTags(),this.moveToCurrentTag(e)},visible(e){e?document.body.addEventListener("click",this.closeMenu):document.body.removeEventListener("click",this.closeMenu)}},mounted(){this.initTags(),this.addTags()},methods:{isActive(e){return e.path===this.$route.path},isAffix(e){return e.meta&&e.meta.affix},filterAffixTags(e,n="/"){let l=[];return e.forEach(o=>{if(o.meta&&o.meta.affix){const c=pe.resolve(n,o.path);l.push({fullPath:c,path:c,name:o.name,meta:{...o.meta}})}if(o.children){const c=this.filterAffixTags(o.children,o.path);c.length>=1&&(l=[...l,...c])}}),l},initTags(){const e=this.affixTags=this.filterAffixTags(this.routes);for(const n of e)n.name&&this.$store.dispatch("tagsView/addVisitedView",n)},addTags(){const{name:e}=this.$route;return e&&this.$store.dispatch("tagsView/addView",this.$route),!1},moveToCurrentTag(e){this.$nextTick(()=>{const n=this.visitedViews,l=document.getElementsByClassName("tags-view-item");for(let o=0,c=n.length;o<c;o++)if(n[o].path===e.path){this.$refs.scrollPane.moveToTarget(l[o]),n[o].fullPath!==this.$route.fullPath&&this.$store.dispatch("tagsView/updateVisitedView",this.$route);break}})},closeSelectedTag(e){this.$store.dispatch("tagsView/delView",e).then(({visitedViews:n})=>{this.isActive(e)&&this.toLastView(n)})},closeOthersTags(){this.$router.push(this.selectedTag),this.$store.dispatch("tagsView/delOthersViews",this.selectedTag).then(()=>{this.moveToCurrentTag(this.selectedTag)})},closeAllTags(e){this.$store.dispatch("tagsView/delAllViews").then(({visitedViews:n})=>{this.affixTags.some(l=>l.path===e.path)||this.toLastView(n)})},toLastView(e){const n=e.slice(-1)[0];n?this.$router.push(n.fullPath):this.$router.push("/")},openMenu(e,n){const o=this.$el.getBoundingClientRect().left,u=this.$el.offsetWidth-105,i=n.clientX-o+15;i>u?this.left=u:this.left=i,this.top=n.clientY,this.visible=!0,this.selectedTag=e},closeMenu(){this.visible=!1},handleScroll(){this.closeMenu()}}}),et={id:"tags-view-container",class:"tags-view-container"};function tt(e,n,l,o,c,u){const i=p("Icon"),r=p("router-link"),t=p("ScrollPane");return d(),_("div",et,[h(t,{ref:"scrollPane",class:"tags-view-wrapper",onScroll:e.handleScroll},{default:f(()=>[(d(!0),_(A,null,B(e.visitedViews,s=>(d(),v(r,{key:s.path,to:{path:s.path,query:s.query,fullPath:s.fullPath},class:L([e.isActive(s)?"active":"","tags-view-item"]),onMouseup:M(a=>e.isAffix(s)?"":e.closeSelectedTag(s),["middle"]),onContextmenu:M(a=>e.openMenu(s,a),["prevent"])},{default:f(()=>[y(x(s.title)+" ",1),e.isAffix(s)?T("",!0):(d(),v(i,{key:0,name:"Close",size:10,onClick:M(a=>e.closeSelectedTag(s),["prevent","stop"])},null,8,["onClick"]))]),_:2},1032,["to","class","onMouseup","onContextmenu"]))),128))]),_:1},8,["onScroll"]),q(g("ul",{style:le({left:e.left+"px",top:e.top+"px"}),class:"contextmenu"},[e.isAffix(e.selectedTag)?T("",!0):(d(),_("li",{key:0,onClick:n[0]||(n[0]=s=>e.closeSelectedTag(e.selectedTag))},"Close")),g("li",{onClick:n[1]||(n[1]=(...s)=>e.closeOthersTags&&e.closeOthersTags(...s))},"Close Others"),g("li",{onClick:n[2]||(n[2]=s=>e.closeAllTags(e.selectedTag))},"Close All")],4),[[j,e.visible]])])}const nt=$(Ze,[["render",tt],["__scopeId","data-v-bb8827e4"]]),st=J({name:"AppMain"}),ot={class:"app-main"};function at(e,n,l,o,c,u){const i=p("router-view");return d(),_("section",ot,[h(i,null,{default:f(({Component:r})=>[h(H,{name:"fade-transform",mode:"out-in"},{default:f(()=>[(d(),v(re,null,[(d(),v(ie(r)))],1024))]),_:2},1024)]),_:1})])}const lt=$(st,[["render",at],["__scopeId","data-v-204c15f3"]]),it={class:"main-container"},rt={__name:"index",setup(e){const n=U(),l=P(),o=w(()=>l.state.app.sidebar.opened),c=w(()=>l.state.app.sidebar.withoutAnimation),u=w(()=>l.state.app.device),i=w(()=>({hideSidebar:!o.value,openSidebar:o.value,withoutAnimation:c.value,mobile:u.value==="mobile"}));z(n,()=>{u.value==="mobile"&&o.value&&l.dispatch("app/closeSideBar",{withoutAnimation:!1})}),ce(()=>{window.addEventListener("resize",a)}),I(()=>{s()&&(l.dispatch("app/toggleDevice","mobile"),l.dispatch("app/closeSideBar",{withoutAnimation:!0}))}),Y(()=>{window.removeEventListener("resize",a)});const r=()=>{l.dispatch("app/closeSideBar",{withoutAnimation:!1})},t=F(992),s=()=>document.body.getBoundingClientRect().width-1<t.value,a=()=>{if(!document.hidden){const m=s();l.dispatch("app/toggleDevice",m?"mobile":"desktop"),m&&l.dispatch("app/closeSideBar",{withoutAnimation:!0})}};return(m,b)=>(d(),_("div",{class:L(["app-wrapper",i.value])},[u.value==="mobile"&&o.value?(d(),_("div",{key:0,class:"drawer-bg",onClick:r})):T("",!0),h(Se),g("div",it,[h(Ne),h(nt),h(lt)])],2))}},ht=$(rt,[["__scopeId","data-v-712952cc"]]);export{ht as default};
