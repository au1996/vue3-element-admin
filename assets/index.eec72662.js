var e=Object.defineProperty,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,n=(e,n)=>{for(var i in n||(n={}))s.call(n,i)&&l(e,i,n[i]);if(t)for(var i of t(n))a.call(n,i)&&l(e,i,n[i]);return e};import{t as i,y as o,o as r,a6 as c,c as u,w as d,a7 as h,v as p,ab as m,m as f,F as v,K as g,a8 as b,a9 as w,a5 as k,g as x,e as T,k as _,$ as y,a as S,G as C,N as E,T as $,aa as F,f as A,P as L,X as V,b as P,x as z,a4 as B,d as I,r as M,u as O,ac as W,z as q,ad as j,W as R}from"./vue.60be4da5.js";import{g as H,c as N}from"./index.ee0d6a75.js";import{S as D,F as X}from"./element-plus.0a622d7a.js";const Y={key:0,class:"menu-wrapper"},G={props:{nav:{type:Object,required:!0},isNest:{type:Boolean,default:!1}},setup:e=>(i(e),(t,s)=>{const a=o("el-menu-item"),l=o("SidebarItem",!0),n=o("el-submenu");return e.nav.meta&&!e.nav.hide?(r(),c("div",Y,[e.nav.children&&e.nav.children.length?(r(),u(n,{key:1,index:e.nav.path},{title:d((()=>[e.nav.meta.icon?(r(),c("i",{key:0,class:m([e.nav.meta.icon,"elIcon"])},null,2)):f("",!0),h("span",null,p(e.nav.meta.title),1)])),default:d((()=>[(r(!0),c(v,null,g(e.nav.children,(e=>(r(),c("div",{key:e.path},[e.children&&e.children.length?(r(),u(l,{key:0,index:e.path,"is-nest":!0,nav:e,class:"nest-menu"},null,8,["index","nav"])):(r(),u(a,{key:1,index:e.path},{title:d((()=>[h("span",null,p(e.meta.title),1)])),_:2},1032,["index"]))])))),128))])),_:1},8,["index"])):(r(),u(a,{key:0,index:e.nav.path,class:m({"submenu-title-noDropdown":!e.nav.isNest})},{title:d((()=>[h("span",null,p(e.nav.meta.title),1)])),default:d((()=>[e.nav.meta.icon?(r(),c("i",{key:0,class:m([e.nav.meta.icon,"elIcon"])},null,2)):f("",!0)])),_:1},8,["index","class"]))])):f("",!0)})};b("data-v-242bed46");const K={class:"sidebar-container"},U=["src"],J={class:"logo-text"};w();const Q={setup(e){const t=H(),s=k(),a=x([]),l=T((()=>s.state.app.sidebar.opened)),n=T((()=>!l.value));_((()=>{i()}));const i=()=>{N.forEach((e=>{"/"===e.path&&a.push(...e.children)}));for(let e=0;e<a.length;e++)a[e].meta&&a[e].meta.roles&&!a[e].meta.roles.includes(t)&&(a.splice(e,1),e--);p(a)},p=e=>{const s=[];e.forEach((e=>{(e.meta&&!e.meta.roles||e.meta&&e.meta.roles&&e.meta.roles.includes(t))&&(s.push(e),e.children&&p(e.children))})),e.length=0,e.push(...s)};return(e,t)=>{const s=o("el-menu"),i=o("el-scrollbar");return r(),c("div",K,[h("div",{class:"logo",onClick:t[0]||(t[0]=t=>e.$router.push("/"))},[h("img",{class:"logo-img",src:y("/vue3-element-admin/assets/logo.03d6d6da.png"),alt:"logo"},null,8,U),S($,{name:"el-zoom-in-center"},{default:d((()=>[C(h("h1",J,"Vue Element Admin",512),[[E,y(l)]])])),_:1})]),S(i,{"wrap-class":"scrollbar-wrapper"},{default:d((()=>[S(s,{router:!0,"default-active":e.$route.path,collapse:y(n),"show-timeout":200,"text-color":"#fff","background-color":"#4a5a74","active-text-color":"#409EFF"},{default:d((()=>[(r(!0),c(v,null,g(y(a),(e=>(r(),u(G,{key:e.path,index:e.path,nav:e},null,8,["index","nav"])))),128))])),_:1},8,["default-active","collapse"])])),_:1})])}},__scopeId:"data-v-242bed46"};b("data-v-627e9038");const Z=[h("path",{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 0 0 0-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0 0 14.4 7z"},null,-1)];w();const ee={props:{isActive:{type:Boolean,default:!1}},emits:["toggleClick"],setup(e,{emit:t}){const s=e,a=()=>{t("toggleClick")};return(e,t)=>(r(),c("div",{class:"pl-15 pr-15",onClick:a},[(r(),c("svg",{class:m([{"is-active":s.isActive},"hamburger"]),viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64"},Z,2))]))},__scopeId:"data-v-627e9038"};b("data-v-7157f966");const te={key:0,class:"no-redirect"};w();const se={setup(e){const t=F(),s=x([]);A(t,(()=>{a()}));const a=()=>{let e=t.matched.filter((e=>e.meta&&e.meta.title));const a=e[0];l(a)||(e=[{path:"/home",meta:{title:"首页"}}].concat(e)),s.length=0;const n=e.filter((e=>e.meta&&e.meta.title&&!1!==e.meta.breadcrumb));s.push(...n)},l=e=>{const t=e&&e.name;return!!t&&t.trim().toLocaleLowerCase()==="Home".toLocaleLowerCase()};return a(),(e,t)=>{const a=o("router-link"),l=o("el-breadcrumb-item"),n=o("el-breadcrumb");return r(),u(n,{separator:"/",class:"app-breadcrumb"},{default:d((()=>[S(V,{name:"breadcrumb"},{default:d((()=>[(r(!0),c(v,null,g(y(s),((e,t)=>(r(),u(l,{key:e.path},{default:d((()=>["noRedirect"===e.redirect||t==y(s).length-1?(r(),c("span",te,p(e.meta.title),1)):(r(),u(a,{key:1,to:e.redirect||e.path},{default:d((()=>[L(p(e.meta.title),1)])),_:2},1032,["to"]))])),_:2},1024)))),128))])),_:1})])),_:1})}},__scopeId:"data-v-7157f966"};var ae,le,ne,ie,oe,re,ce={exports:{}};
/*!
* screenfull
* v5.1.0 - 2020-12-24
* (c) Sindre Sorhus; MIT License
*/ae=ce,le="undefined"!=typeof window&&void 0!==window.document?window.document:{},ne=ae.exports,ie=function(){for(var e,t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],s=0,a=t.length,l={};s<a;s++)if((e=t[s])&&e[1]in le){for(s=0;s<e.length;s++)l[t[0][s]]=e[s];return l}return!1}(),oe={change:ie.fullscreenchange,error:ie.fullscreenerror},re={request:function(e,t){return new Promise(function(s,a){var l=function(){this.off("change",l),s()}.bind(this);this.on("change",l);var n=(e=e||le.documentElement)[ie.requestFullscreen](t);n instanceof Promise&&n.then(l).catch(a)}.bind(this))},exit:function(){return new Promise(function(e,t){if(this.isFullscreen){var s=function(){this.off("change",s),e()}.bind(this);this.on("change",s);var a=le[ie.exitFullscreen]();a instanceof Promise&&a.then(s).catch(t)}else e()}.bind(this))},toggle:function(e,t){return this.isFullscreen?this.exit():this.request(e,t)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,t){var s=oe[e];s&&le.addEventListener(s,t,!1)},off:function(e,t){var s=oe[e];s&&le.removeEventListener(s,t,!1)},raw:ie},ie?(Object.defineProperties(re,{isFullscreen:{get:function(){return Boolean(le[ie.fullscreenElement])}},element:{enumerable:!0,get:function(){return le[ie.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(le[ie.fullscreenEnabled])}}}),ne?ae.exports=re:window.screenfull=re):ne?ae.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};var ue=ce.exports;b("data-v-05e1b00c");const de=[h("i",{class:"el-icon-full-screen"},null,-1)];w();const he={setup(e){const t=P(!1);z((()=>{n()})),_((()=>{l()}));const s=()=>ue.isEnabled?(ue.toggle(),!1):(D({message:"you browser can not work",type:"warning"}),!1),a=()=>{t.value=ue.isFullscreen},l=()=>{ue.isEnabled&&ue.on("change",a)},n=()=>{ue.isEnabled&&ue.off("change",a)};return(e,t)=>(r(),c("div",{class:"screenfull-box",onClick:s},de))},__scopeId:"data-v-05e1b00c"};b("data-v-dd5d2b48");const pe={class:"right-menu"},me={class:"avatar-wrapper"},fe=["src"],ve=h("i",{class:"el-icon-caret-bottom"},null,-1),ge=L("首页"),be=L("修改密码"),we=L("登出");w();const ke={setup(e){const t=B(),s=k(),a=T((()=>s.state.app.sidebar.opened)),l=T((()=>s.state.user.avatar)),n=()=>{s.dispatch("app/toggleSideBar")},i=()=>{D.warning("请联系管理员")},c=()=>{X.confirm("退出登录","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{s.dispatch("user/logout").then((()=>{t.push("/login")}))})).catch((()=>{}))};return(e,t)=>{const s=o("el-tooltip"),p=o("el-dropdown-item"),m=o("el-dropdown-menu"),f=o("el-dropdown"),v=o("el-menu");return r(),u(v,{class:"navbar",mode:"horizontal"},{default:d((()=>[S(ee,{class:"hamburger-container","is-active":y(a),onToggleClick:n},null,8,["is-active"]),S(se,{class:"breadcrumb-container"}),h("div",pe,[S(s,{effect:"dark",content:"全屏",placement:"bottom"},{default:d((()=>[S(he,{class:"screenfull"})])),_:1}),S(f,{class:"avatar-container right-menu-item"},{dropdown:d((()=>[S(m,null,{default:d((()=>[S(p,{onClick:t[0]||(t[0]=t=>e.$router.push("/"))},{default:d((()=>[ge])),_:1}),S(p,{divided:"",onClick:i},{default:d((()=>[be])),_:1}),S(p,{divided:"",onClick:c},{default:d((()=>[we])),_:1})])),_:1})])),default:d((()=>[h("div",me,[h("img",{src:y(l)?y(l):"/img/logo.png",class:"user-avatar"},null,8,fe),ve])])),_:1})])])),_:1})}},__scopeId:"data-v-dd5d2b48"};const xe=I({name:"ScrollPane",emits:{scroll:null},data:()=>({left:0,tagAndTagSpacing:4}),computed:{scrollWrapper(){return this.$refs.scrollContainer.$refs.wrap}},mounted(){this.scrollWrapper.addEventListener("scroll",this.emitScroll,!0)},beforeUnmount(){this.scrollWrapper.removeEventListener("scroll",this.emitScroll)},methods:{handleScroll(e){const t=e.wheelDelta||40*-e.deltaY,s=this.scrollWrapper;s.scrollLeft=s.scrollLeft+t/4},emitScroll(){this.$emit("scroll")},moveToTarget(e){const t=this.$refs.scrollContainer.$el.offsetWidth,s=this.scrollWrapper,a=document.getElementsByClassName("tags-view-item");let l=null,n=null;if(a.length>0&&(l=a[0],n=a[a.length-1]),l===e)s.scrollLeft=0;else if(n===e)s.scrollLeft=s.scrollWidth-t;else{const l=[...a].findIndex((t=>t===e)),n=a[l-1],i=a[l+1],o=i.offsetLeft+i.offsetWidth+this.tagAndTagSpacing,r=n.offsetLeft-this.tagAndTagSpacing;o>s.scrollLeft+t?s.scrollLeft=o-t:r<s.scrollLeft&&(s.scrollLeft=r)}}}});xe.render=function(e,t,s,a,l,n){const i=o("el-scrollbar");return r(),u(i,{ref:"scrollContainer",vertical:!1,class:"scroll-container",onWheel:O(e.handleScroll,["prevent"])},{default:d((()=>[M(e.$slots,"default")])),_:3},8,["onWheel"])},xe.__scopeId="data-v-3e5640df";var Te={};const _e=I({components:{ScrollPane:xe},data:()=>({visible:!1,top:0,left:0,selectedTag:{},affixTags:[]}),computed:{visitedViews(){return this.$store.state.tagsView.visitedViews},routes(){return this.$store.state.permission.routes}},watch:{$route(e){this.addTags(),this.moveToCurrentTag(e)},visible(e){e?document.body.addEventListener("click",this.closeMenu):document.body.removeEventListener("click",this.closeMenu)}},mounted(){this.initTags(),this.addTags()},methods:{isActive(e){return e.path===this.$route.path},isAffix:e=>e.meta&&e.meta.affix,filterAffixTags(e,t="/"){let s=[];return e.forEach((e=>{if(e.meta&&e.meta.affix){const a=Te.resolve(t,e.path);s.push({fullPath:a,path:a,name:e.name,meta:n({},e.meta)})}if(e.children){const t=this.filterAffixTags(e.children,e.path);t.length>=1&&(s=[...s,...t])}})),s},initTags(){const e=this.affixTags=this.filterAffixTags(this.routes);for(const t of e)t.name&&this.$store.dispatch("tagsView/addVisitedView",t)},addTags(){const{name:e}=this.$route;return e&&this.$store.dispatch("tagsView/addView",this.$route),!1},moveToCurrentTag(e){this.$nextTick((()=>{const t=this.visitedViews,s=document.getElementsByClassName("tags-view-item");for(let a=0,l=t.length;a<l;a++)if(t[a].path===e.path){this.$refs.scrollPane.moveToTarget(s[a]),t[a].fullPath!==this.$route.fullPath&&this.$store.dispatch("tagsView/updateVisitedView",this.$route);break}}))},closeSelectedTag(e){this.$store.dispatch("tagsView/delView",e).then((({visitedViews:t})=>{this.isActive(e)&&this.toLastView(t)}))},closeOthersTags(){this.$router.push(this.selectedTag),this.$store.dispatch("tagsView/delOthersViews",this.selectedTag).then((()=>{this.moveToCurrentTag(this.selectedTag)}))},closeAllTags(e){this.$store.dispatch("tagsView/delAllViews").then((({visitedViews:t})=>{this.affixTags.some((t=>t.path===e.path))||this.toLastView(t)}))},toLastView(e){const t=e.slice(-1)[0];t?this.$router.push(t.fullPath):this.$router.push("/")},openMenu(e,t){const s=this.$el.getBoundingClientRect().left,a=this.$el.offsetWidth-105,l=t.clientX-s+15;this.left=l>a?a:l,this.top=t.clientY,this.visible=!0,this.selectedTag=e},closeMenu(){this.visible=!1},handleScroll(){this.closeMenu()}}});b("data-v-32a8ea63");const ye={id:"tags-view-container",class:"tags-view-container"},Se=["onClick"];w(),_e.render=function(e,t,s,a,l,n){const i=o("router-link"),b=o("ScrollPane");return r(),c("div",ye,[S(b,{ref:"scrollPane",class:"tags-view-wrapper",onScroll:e.handleScroll},{default:d((()=>[(r(!0),c(v,null,g(e.visitedViews,(t=>(r(),u(i,{key:t.path,to:{path:t.path,query:t.query,fullPath:t.fullPath},class:m([e.isActive(t)?"active":"","tags-view-item"]),onMouseup:O((s=>e.isAffix(t)?"":e.closeSelectedTag(t)),["middle"]),onContextmenu:O((s=>e.openMenu(t,s)),["prevent"])},{default:d((()=>[L(p(t.title)+" ",1),e.isAffix(t)?f("",!0):(r(),c("span",{key:0,class:"el-icon-close",onClick:O((s=>e.closeSelectedTag(t)),["prevent","stop"])},null,8,Se))])),_:2},1032,["to","class","onMouseup","onContextmenu"])))),128))])),_:1},8,["onScroll"]),C(h("ul",{style:W({left:e.left+"px",top:e.top+"px"}),class:"contextmenu"},[e.isAffix(e.selectedTag)?f("",!0):(r(),c("li",{key:0,onClick:t[0]||(t[0]=t=>e.closeSelectedTag(e.selectedTag))},"Close")),h("li",{onClick:t[1]||(t[1]=(...t)=>e.closeOthersTags&&e.closeOthersTags(...t))},"Close Others"),h("li",{onClick:t[2]||(t[2]=t=>e.closeAllTags(e.selectedTag))},"Close All")],4),[[E,e.visible]])])},_e.__scopeId="data-v-32a8ea63";const Ce=I({name:"AppMain"});b("data-v-728a8b18");const Ee={class:"app-main"};w(),Ce.render=function(e,t,s,a,l,n){const i=o("router-view");return r(),c("section",Ee,[S(i,null,{default:d((({Component:e})=>[S($,{name:"fade-transform",mode:"out-in"},{default:d((()=>[(r(),u(j,null,[(r(),u(q(e)))],1024))])),_:2},1024)])),_:1})])},Ce.__scopeId="data-v-728a8b18";b("data-v-3e23c4ca");const $e={class:"main-container"};w();const Fe={setup(e){const t=F(),s=k(),a=T((()=>s.state.app.sidebar.opened)),l=T((()=>s.state.app.sidebar.withoutAnimation)),n=T((()=>s.state.app.device)),i=T((()=>({hideSidebar:!a.value,openSidebar:a.value,withoutAnimation:l.value,mobile:"mobile"===n.value})));A(t,(()=>{"mobile"===n.value&&a.value&&s.dispatch("app/closeSideBar",{withoutAnimation:!1})})),R((()=>{window.addEventListener("resize",p)})),_((()=>{d()&&(s.dispatch("app/toggleDevice","mobile"),s.dispatch("app/closeSideBar",{withoutAnimation:!0}))})),z((()=>{window.removeEventListener("resize",p)}));const o=()=>{s.dispatch("app/closeSideBar",{withoutAnimation:!1})},u=P(992),d=()=>document.body.getBoundingClientRect().width-1<u.value,p=()=>{if(!document.hidden){const e=d();s.dispatch("app/toggleDevice",e?"mobile":"desktop"),e&&s.dispatch("app/closeSideBar",{withoutAnimation:!0})}};return(e,t)=>(r(),c("div",{class:m(["app-wrapper",y(i)])},["mobile"===y(n)&&y(a)?(r(),c("div",{key:0,class:"drawer-bg",onClick:o})):f("",!0),S(Q),h("div",$e,[S(ke),S(_e),S(Ce)])],2))},__scopeId:"data-v-3e23c4ca"};export{Fe as default};
